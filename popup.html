<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Plan My Day â€” Todoist</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="wrap">
      <!-- Screen 0: Token prompt (only shown if no token saved) -->
      <section id="screen-token" class="screen hidden">
        <h1>Connect Todoist</h1>
        <p>Paste your Todoist <strong>API token</strong> (Settings â†’ Integrations â†’ API token).</p>
        <input id="tokenInput" type="password" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" />
        <div class="row">
          <button id="saveToken">Save token</button>
        </div>
        <p class="hint">Your token is stored locally in <code>chrome.storage.sync</code>.</p>
      </section>

      <!-- Screen 1: Start -->
      <section id="screen-start" class="screen">
        <h1 class="header-title"><img src="assets/icon-128.png" alt="" width="20" height="20" /> Plan my day for Todoist tasks</h1>

        <div class="feature">
          <div class="feature-head">
            <div class="feature-title">Plan my day</div>
            <div class="feature-subtitle">Review overdue and today's tasks</div>
          </div>
          <div class="feature-body">
            <button id="planBtn">Start planning</button>
          </div>
        </div>

        <div class="feature">
          <div class="feature-head">
            <div class="feature-title">Search tasks</div>
            <div class="feature-subtitle">Find up to 50 active tasks by keyword</div>
          </div>
          <div class="feature-body">
            <div class="row">
              <input id="searchInput" type="text" placeholder="Type keyword..." />
              <button id="searchBtn" class="secondary">Search</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Screen 2: Task review -->
      <section id="screen-task" class="screen hidden">
        <div class="task-card">
          <div class="task-title" id="taskTitle"></div>
          <div class="task-meta" id="taskMeta"></div>
        </div>

        <!-- Date selection group (preset radios + custom calendar) -->
        <div class="group">
          <div class="label">Date</div>
          <div class="radios">
            <label><input type="radio" name="dateChoice" value="today" checked /> Today</label>
            <label><input type="radio" name="dateChoice" value="tomorrow" /> Tomorrow</label>
            <label><input type="radio" name="dateChoice" value="next_mon" /> next Mon</label>
            <label><input type="radio" name="dateChoice" value="next_tue" /> next Tues</label>
            <label><input type="radio" name="dateChoice" value="next_wed" /> next Wed</label>
            <label><input type="radio" name="dateChoice" value="next_thu" /> next Thurs</label>
            <label><input type="radio" name="dateChoice" value="next_fri" /> next Fri</label>
            <label><input type="radio" name="dateChoice" value="next_sat" /> next Sat</label>
            <label><input type="radio" name="dateChoice" value="next_sun" /> next Sun</label>
            <label><input type="radio" name="dateChoice" value="next_28th" /> next 28th</label>
            <label><input type="radio" name="dateChoice" value="next_1st" /> next 1st</label>
            <label><input type="radio" name="dateChoice" value="skip_next" /> Skip to next occurrence</label>
          </div>
        </div>

        <!-- Labels grouped by meaning -->
        <div class="group">
          <div class="label">Urgency</div>
          <div class="checks">
            <label><input type="radio" name="urgencyChoice" value="urgent-now" /> urgent-now</label>
            <label><input type="radio" name="urgencyChoice" value="urgent-today" /> urgent-today</label>
            <label><input type="radio" name="urgencyChoice" value="urgent-soon" /> urgent-soon</label>
          </div>
        </div>

        <div class="group">
          <div class="label">Pressure</div>
          <div class="checks">
            <label><input type="radio" name="pressureChoice" value="high-pressure" /> high-pressure</label>
            <label><input type="radio" name="pressureChoice" value="low-pressure" /> low-pressure</label>
          </div>
        </div>

        <div class="group">
          <div class="label">Quick wins</div>
          <div class="checks">
            <label><input type="checkbox" value="low-hanging-fruit" /> low-hanging-fruit</label>
          </div>
        </div>

        <div class="row" id="actionRow">
          <button id="submitUpdate">Update</button>
          <button id="prevTask" class="secondary">Previous</button>
          <button id="skipTask" class="secondary">Skip</button>
          <button id="doneTask" class="success sm">Done</button>
          <button id="deleteTask" class="danger sm">Delete</button>
        </div>
        <div id="status" class="status"></div>
      </section>

      <!-- Screen 3: All done -->
      <section id="screen-done" class="screen hidden">
        <h1>We are ready for the day! âœ¨</h1>
        <p class="muted">You've reviewed all tasks planned for today. Go get those wins. ðŸ’ª</p>
        <button id="restart" class="secondary">Start over</button>
      </section>

      <!-- Screen 4: Search results -->
      <section id="screen-search" class="screen hidden">
        <h1 id="searchHeader">Search results</h1>
        <div id="searchList" class="list"></div>
        <div class="row">
          <button id="backHome" class="secondary">Back</button>
        </div>
      </section>
    </div>

    <script src="popup.js" type="module"></script>
  </body>
</html>